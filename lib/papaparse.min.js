// PapaParse CSV Parser - CDN Loader
// For offline use: Replace this file with the library from https://www.papaparse.com/
// Download: https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js

(function() {
    // Check if already loaded
    if (typeof Papa !== 'undefined') {
        return;
    }
    
    // Create promise for this library
    window.libraryLoader = window.libraryLoader || {};
    window.libraryLoader.papaparse = new Promise((resolve, reject) => {
        const script = document.createElement('script');
        script.src = 'https://cdnjs.cloudflare.com/ajax/libs/PapaParse/5.4.1/papaparse.min.js';
        script.onload = () => {
            console.log('PapaParse loaded successfully');
            resolve();
        };
        script.onerror = () => {
            console.error('Failed to load PapaParse. For offline use, download the library from https://www.papaparse.com/');
            reject(new Error('Failed to load PapaParse'));
        };
        document.head.appendChild(script);
    });
})();
